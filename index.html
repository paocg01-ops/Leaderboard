<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strike for Cake - Weekly Leaderboard</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&family=Fredoka:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #1a0033 0%, #2d1b69 25%, #0f0f23 50%, #1a0033 75%, #2d1b69 100%);
            min-height: 100vh;
            font-family: 'Baloo 2', cursive;
            color: #FFF9F0;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
            cursor: none;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20px 30px, #fff, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, #fff, transparent),
                radial-gradient(1px 1px at 200px 90px, rgba(255,255,255,0.8), transparent),
                radial-gradient(2px 2px at 240px 50px, #fff, transparent),
                radial-gradient(1px 1px at 280px 10px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 320px 70px, #fff, transparent),
                radial-gradient(2px 2px at 360px 40px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 400px 20px, #fff, transparent),
                radial-gradient(1px 1px at 440px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 480px 60px, #fff, transparent),
                radial-gradient(1px 1px at 520px 30px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 560px 90px, #fff, transparent),
                radial-gradient(2px 2px at 600px 10px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 640px 50px, #fff, transparent),
                radial-gradient(1px 1px at 680px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(2px 2px at 720px 20px, #fff, transparent),
                radial-gradient(1px 1px at 760px 80px, rgba(255,255,255,0.6), transparent);
            background-repeat: repeat;
            background-size: 800px 100px;
            animation: twinkle 4s ease-in-out infinite alternate, drift 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(1px 1px at 50px 60px, #fff, transparent),
                radial-gradient(2px 2px at 100px 20px, rgba(255,255,255,0.7), transparent),
                radial-gradient(1px 1px at 150px 90px, #fff, transparent),
                radial-gradient(1px 1px at 200px 40px, rgba(255,255,255,0.5), transparent),
                radial-gradient(2px 2px at 250px 70px, #fff, transparent),
                radial-gradient(1px 1px at 300px 10px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 350px 80px, #fff, transparent),
                radial-gradient(2px 2px at 400px 50px, rgba(255,255,255,0.6), transparent),
                radial-gradient(1px 1px at 450px 30px, #fff, transparent),
                radial-gradient(1px 1px at 500px 90px, rgba(255,255,255,0.7), transparent),
                radial-gradient(2px 2px at 550px 15px, #fff, transparent),
                radial-gradient(1px 1px at 600px 75px, rgba(255,255,255,0.5), transparent),
                radial-gradient(1px 1px at 650px 45px, #fff, transparent),
                radial-gradient(2px 2px at 700px 85px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 750px 25px, #fff, transparent);
            background-repeat: repeat;
            background-size: 800px 100px;
            animation: twinkle 3s ease-in-out infinite alternate-reverse, drift 25s linear infinite reverse;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        @keyframes drift {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100px); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 25px 30px 20px 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border-radius: 25px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.3)"/><circle cx="80" cy="30" r="1.5" fill="rgba(255,255,255,0.2)"/><circle cx="60" cy="70" r="1" fill="rgba(255,255,255,0.4)"/><circle cx="30" cy="80" r="1.5" fill="rgba(255,255,255,0.3)"/></svg>');
            pointer-events: none;
        }
        .text-badge {
  display: inline-block;
  padding: 6px 14px;
  margin-left: 8px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: .3px;
  line-height: 1.2;
  vertical-align: middle;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25);
  text-transform: uppercase;
}

/* Canva vibes */
.badge-chest-hero {
  background: linear-gradient(45deg, #F5B642, #FFD700);
  color: #2d3436;
  font-weight: 700;
}

.badge-legend {
  background: linear-gradient(45deg, #F5B642, #FF6F91);
  color: #fff;
  font-weight: 700;
}

.badge-consistent {
  background: linear-gradient(45deg, #4ECDC4, #44A08D);
  color: #fff;
  font-weight: 700;
}

        .clan-name {
            font-family: 'Fredoka', cursive;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(45deg, #F5B642, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            text-shadow: 0 0 30px rgba(245, 182, 66, 0.6);
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .week-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
            margin-bottom: 20px;
        }
        
        .countdown-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .countdown-timer {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2), rgba(238, 90, 36, 0.15));
            border: 2px solid rgba(255, 107, 107, 0.4);
            border-radius: 20px;
            padding: 20px 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.2);
        }
        
        .countdown-label {
            text-align: center;
            font-size: 1.1rem;
            font-weight: 700;
            color: #FF6B6B;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
        }
        
        .countdown-display {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }
        
        .time-unit {
            text-align: center;
            min-width: 60px;
        }
        
        .time-value {
            font-family: 'Inter', sans-serif;
            font-size: 2.2rem;
            font-weight: 800;
            color: #FF6B6B;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
            animation: urgentPulse 2s ease-in-out infinite;
            line-height: 1;
            margin-bottom: 5px;
        }
        
        .time-label {
            font-size: 0.8rem;
            font-weight: 600;
            color: #FFF9F0;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @keyframes urgentPulse {
            0%, 100% { 
                transform: scale(1);
                text-shadow: 0 0 20px rgba(255, 107, 107, 0.6);
            }
            50% { 
                transform: scale(1.05);
                text-shadow: 0 0 30px rgba(255, 107, 107, 0.9);
            }
        }
        
        .week-progress {
            width: 100%;
            max-width: 400px;
        }
        
        .progress-label {
            text-align: center;
            font-size: 1rem;
            font-weight: 600;
            color: #F5B642;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .progress-bar-container {
            position: relative;
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid rgba(245, 182, 66, 0.3);
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #F5B642, #FFD700, #FF6F91);
            border-radius: 8px;
            transition: width 1s ease-out;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: progressShine 2s linear infinite;
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            font-weight: 700;
            color: #2d3436;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            z-index: 2;
        }
        
        .data-input {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .input-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }
        
        .data-textarea {
            width: 100%;
            height: 120px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 10px;
            padding: 15px;
            font-size: 14px;
            color: #333;
            resize: vertical;
            font-family: 'Inter', sans-serif;
        }
        
        .data-textarea::placeholder {
            color: #666;
        }
        
        .update-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }
        
        .leaderboard {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
            border-radius: 25px;
            padding: 35px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .leaderboard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="10" cy="10" r="1" fill="rgba(245,182,66,0.2)"/><circle cx="90" cy="20" r="1.5" fill="rgba(255,111,145,0.2)"/><circle cx="70" cy="80" r="1" fill="rgba(245,182,66,0.15)"/><circle cx="20" cy="90" r="1.2" fill="rgba(255,111,145,0.15)"/></svg>');
            pointer-events: none;
        }
        
        .leaderboard-header {
            display: grid;
            grid-template-columns: 80px 1fr 120px 120px;
            gap: 20px;
            padding: 20px 25px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .player-row {
            display: grid;
            grid-template-columns: 90px 1fr 120px 120px;
            gap: 20px;
            padding: 18px 25px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .player-row:nth-child(even) {
            background: rgba(255, 255, 255, 0.12);
        }
        
        .player-row:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(8px);
            box-shadow: 0 8px 25px rgba(245, 182, 66, 0.15);
        }
        
        .rank {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .rank-1 {
            color: #F5B642;
            text-shadow: 0 0 20px rgba(245, 182, 66, 0.8);
            animation: goldShimmer 2s ease-in-out infinite alternate;
        }
        
        .rank-2 {
            color: #E8E8E8;
            text-shadow: 0 0 20px rgba(232, 232, 232, 0.6);
            animation: silverShimmer 2s ease-in-out infinite alternate;
        }
        
        .rank-3 {
            color: #CD7F32;
            text-shadow: 0 0 20px rgba(205, 127, 50, 0.6);
            animation: bronzeShimmer 2s ease-in-out infinite alternate;
        }
        
        @keyframes goldShimmer {
            from { text-shadow: 0 0 20px rgba(245, 182, 66, 0.8); }
            to { text-shadow: 0 0 30px rgba(255, 215, 0, 1); }
        }
        
        @keyframes silverShimmer {
            from { text-shadow: 0 0 20px rgba(232, 232, 232, 0.6); }
            to { text-shadow: 0 0 25px rgba(255, 255, 255, 0.8); }
        }
        
        @keyframes bronzeShimmer {
            from { text-shadow: 0 0 20px rgba(205, 127, 50, 0.6); }
            to { text-shadow: 0 0 25px rgba(255, 140, 0, 0.8); }
        }
        
        .player-name {
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .player-name:hover {
            font-size: 1.4rem;
            transform: scale(1.1);
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }
        
        .clan-emblem {
            font-size: 1.2rem;
        }
        
        .stat {
            text-align: center;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
        }
        
        .score {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: #FF6F91;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 8px rgba(255, 111, 145, 0.3);
        }
        
        .top-3 {
            border-left-color: #ffd700;
            animation: glow 2s ease-in-out infinite alternate;
            position: relative;
            overflow: visible;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }
            to { box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); }
        }
        
        .emoji-explosion {
            position: absolute;
            pointer-events: none;
            z-index: 1000;
        }
        
        .emoji-particle {
            position: absolute;
            font-size: 1.2rem;
            animation: explode 1.5s ease-out forwards;
            opacity: 0;
        }
        
        @keyframes explode {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1.2) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.8) rotate(360deg);
            }
        }
        
        .trophy {
            display: inline-block;
            margin-left: 8px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
            60% { transform: translateY(-3px); }
        }
        
        .achievement-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-progress {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            color: #FFF9F0;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.6rem;
            font-weight: 500;
            margin-left: 8px;
            opacity: 0.8;
            font-style: italic;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .badge-progress-row {
            grid-column: 1 / -1;
            padding: 5px 25px 0 25px;
            margin-top: -8px;
        }
        
        .badge-progress-row .badge-progress {
            font-size: 0.55rem;
            margin-left: 0;
            padding: 2px 6px;
        }
        
        .chest-hero {
            background: linear-gradient(45deg, #F5B642, #FFD700);
            color: #2d3436;
            font-weight: 600;
        }
        
        .score-legend {
            background: linear-gradient(45deg, #F5B642, #FF6F91);
            color: white;
            font-weight: 600;
        }
        
        .consistent-warrior {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
            font-weight: 600;
        }
        
        .motivational-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-bottom: 45px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            padding: 25px 20px;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.25);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 20%, rgba(245, 182, 66, 0.1), transparent 50%);
            pointer-events: none;
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(245, 182, 66, 0.2);
        }
        
        .stat-card {
            cursor: pointer;
        }
        
        .stat-explosion {
            position: absolute;
            pointer-events: none;
            z-index: 1000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .stat-emoji-particle {
            position: absolute;
            font-size: 1.5rem;
            animation: statExplode 2s ease-out forwards;
            opacity: 0;
            pointer-events: none;
        }
        
        @keyframes statExplode {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            30% {
                opacity: 1;
                transform: scale(1.3) rotate(120deg);
            }
            70% {
                opacity: 0.8;
                transform: scale(1.1) rotate(240deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.7) rotate(360deg);
            }
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: block;
        }
        
        .stat-number {
            font-family: 'Inter', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: #FF6F91;
            margin-bottom: 8px;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(255, 111, 145, 0.3);
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.85;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 500;
            color: #FFF9F0;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 8px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            border-radius: 3px;
            transition: width 1s ease-out;
        }
        
        .queen-message {
            text-align: center;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #FFF9F0;
            opacity: 0.8;
            font-weight: 400;
        }
        
        .motivational-message {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            border-radius: 15px;
            padding: 10px 20px 20px 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid rgba(255, 182, 193, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .motivational-message::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }
        
        .motivational-text {
            font-size: 1.1rem;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }
        
        .celebration-emoji {
            font-size: 1.5rem;
            margin: 0 5px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            opacity: 0.7;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .search-container {
            margin-bottom: 25px;
        }
        
        .search-box {
            position: relative;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: #FFF9F0;
            font-size: 16px;
            font-family: 'Baloo 2', cursive;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #F5B642;
            box-shadow: 0 0 20px rgba(245, 182, 66, 0.3);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .search-input::placeholder {
            color: rgba(255, 249, 240, 0.7);
            text-align: center;
        }
        
        .clear-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 107, 107, 0.8);
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .clear-btn:hover {
            background: rgba(255, 107, 107, 1);
            transform: translateY(-50%) scale(1.1);
        }
        
        .search-results {
            margin-top: 15px;
            text-align: center;
            font-size: 14px;
            color: rgba(255, 249, 240, 0.8);
        }
        
        .highlight-match {
            background: linear-gradient(45deg, #F5B642, #FFD700);
            color: #2d3436;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .search-match {
            animation: searchGlow 2s ease-in-out infinite alternate;
            border-left-color: #F5B642 !important;
            box-shadow: 0 0 15px rgba(245, 182, 66, 0.4) !important;
        }
        
        @keyframes searchGlow {
            from { box-shadow: 0 0 15px rgba(245, 182, 66, 0.4); }
            to { box-shadow: 0 0 25px rgba(245, 182, 66, 0.6); }
        }
        
        .tab-navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 12px 25px;
            color: #FFF9F0;
            font-family: 'Baloo 2', cursive;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        .tab-btn:hover::before {
            transform: translateX(100%);
        }
        
        .tab-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(245, 182, 66, 0.3);
            border-color: #F5B642;
        }
        
        .tab-btn.active {
            background: linear-gradient(45deg, #F5B642, #FFD700);
            color: #2d3436;
            border-color: #FFD700;
            box-shadow: 0 8px 20px rgba(245, 182, 66, 0.4);
            transform: translateY(-2px);
        }
        
        .tab-btn.active:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(245, 182, 66, 0.5);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .info-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
            border-radius: 25px;
            padding: 35px;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .info-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="10" cy="10" r="1" fill="rgba(245,182,66,0.2)"/><circle cx="90" cy="20" r="1.5" fill="rgba(255,111,145,0.2)"/><circle cx="70" cy="80" r="1" fill="rgba(245,182,66,0.15)"/><circle cx="20" cy="90" r="1.2" fill="rgba(255,111,145,0.15)"/></svg>');
            pointer-events: none;
        }
        
        .section-title {
            font-family: 'Fredoka', cursive;
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #F5B642, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .section-description {
            text-align: center;
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 35px;
            position: relative;
            z-index: 1;
        }
        
        .badge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .badge-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .badge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(245, 182, 66, 0.2);
            border-color: rgba(245, 182, 66, 0.5);
        }
        
        .badge-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .badge-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
            padding: 8px 16px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .badge-requirement {
            font-size: 1rem;
            font-weight: 600;
            color: #FFD700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .badge-description {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.9;
        }
        
        .badge-tips {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            z-index: 1;
        }
        
        .badge-tips h3 {
            color: #F5B642;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .badge-tips ul {
            list-style: none;
            padding: 0;
        }
        
        .badge-tips li {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            line-height: 1.5;
        }
        
        .badge-tips li::before {
            content: '🎯';
            position: absolute;
            left: 0;
            top: 0;
        }
        
        .scoring-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 35px;
        }
        
        .scoring-category {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.02));
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.15);
        }
        
        .category-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            color: #F5B642;
        }
        
        .scoring-table {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .scoring-row {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .scoring-row:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .scoring-row.header {
            background: rgba(245, 182, 66, 0.2);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }
        
        .scoring-row.header:hover {
            transform: none;
        }
        
        .points-value {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            color: #FF6F91;
            font-size: 1.1rem;
            text-align: right;
            min-width: 50px;
        }
        
        .scoring-tips {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            z-index: 1;
        }
        
        .scoring-tips h3 {
            color: #F5B642;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .scoring-tips ul {
            list-style: none;
            padding: 0;
        }
        
        .scoring-tips li {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            line-height: 1.5;
        }
        
        .scoring-tips li::before {
            content: '💡';
            position: absolute;
            left: 0;
            top: 0;
        }
        
        .magic-cursor {
            position: fixed;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.3));
            pointer-events: none;
            z-index: 10;
            transition: transform 0.1s ease;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.6), 0 0 30px rgba(255, 255, 255, 0.4), 0 0 45px rgba(255, 255, 255, 0.2);
            animation: softPulse 2.5s ease-in-out infinite alternate;
        }
        
        .magic-cursor::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            width: 32px;
            height: 32px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: gentleRotate 4s linear infinite;
        }
        
        .magic-cursor::after {
            content: '🍰';
            position: absolute;
            top: -28px;
            left: -8px;
            font-size: 14px;
            animation: cakeFloat 2s ease-in-out infinite;
        }
        
        @keyframes softPulse {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.6), 0 0 30px rgba(255, 255, 255, 0.4), 0 0 45px rgba(255, 255, 255, 0.2);
            }
            100% { 
                transform: scale(1.1);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 255, 255, 0.5), 0 0 60px rgba(255, 255, 255, 0.3);
            }
        }
        
        @keyframes gentleRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes cakeFloat {
            0%, 100% { 
                opacity: 0.9;
                transform: translateY(0) scale(1);
            }
            50% { 
                opacity: 1;
                transform: translateY(-3px) scale(1.05);
            }
        }
        
        .magic-trail {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.3));
            pointer-events: none;
            z-index: 5;
            animation: trailFade 1.2s ease-out forwards;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
        }
        
        @keyframes trailFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.3);
            }
        }
        
        .mobile-card {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 18px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            position: relative;
            z-index: 1;
        }
        
        .mobile-card:nth-child(even) {
            background: rgba(255, 255, 255, 0.12);
        }
        
        .mobile-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245, 182, 66, 0.15);
        }
        
        .mobile-card-row1 {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .mobile-rank {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.3rem;
            text-align: center;
            letter-spacing: 1px;
            min-width: 45px;
        }
        
        .mobile-player-name {
            font-weight: 600;
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            gap: 6px;
            flex: 1;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mobile-player-name:hover,
        .mobile-player-name:active,
        .mobile-player-name.tapped {
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }
        
        .mobile-card-row2 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 4px;
        }
        
        .mobile-badges {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 3px;
        }
        
        .mobile-badges .achievement-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            display: inline-block;
            white-space: nowrap;
        }
        
        .mobile-stats {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .mobile-score {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            color: #FF6F91;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 8px rgba(255, 111, 145, 0.3);
            white-space: nowrap;
        }
        
        .mobile-chests {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            white-space: nowrap;
        }
        
        .player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
            cursor: auto;
        }
        
        .player-modal.active {
            display: flex;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a0033, #2d1b69);
            border: 3px solid #F5B642;
            border-radius: 25px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            position: relative;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.9);
            animation: modalSlideIn 0.3s ease-out;
            cursor: auto;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255, 107, 107, 0.8);
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            background: rgba(255, 107, 107, 1);
            transform: scale(1.1);
        }
        
        .modal-rank {
            font-family: 'Inter', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 10px;
            letter-spacing: 1px;
            position: relative;
            z-index: 2;
        }
        
        .modal-rank.rank-1 {
            color: #F5B642;
            text-shadow: 0 0 20px rgba(245, 182, 66, 0.8);
            animation: goldShimmer 2s ease-in-out infinite alternate;
        }
        
        .modal-rank.rank-2 {
            color: #E8E8E8;
            text-shadow: 0 0 20px rgba(232, 232, 232, 0.6);
            animation: silverShimmer 2s ease-in-out infinite alternate;
        }
        
        .modal-rank.rank-3 {
            color: #CD7F32;
            text-shadow: 0 0 20px rgba(205, 127, 50, 0.6);
            animation: bronzeShimmer 2s ease-in-out infinite alternate;
        }
        
        .mobile-player-info {
            display: grid;
            grid-template-columns: 60px 1fr 80px;
            gap: 15px;
            width: 100%;
            align-items: center;
        }
        
        .floating-player-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #F5B642;
            text-shadow: 0 0 15px rgba(245, 182, 66, 0.6);
            margin-bottom: 15px;
            animation: floatName 3s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }
        
        @keyframes floatName {
            0%, 100% { 
                transform: translateY(0px);
                text-shadow: 0 0 15px rgba(245, 182, 66, 0.6);
            }
            50% { 
                transform: translateY(-3px);
                text-shadow: 0 0 20px rgba(245, 182, 66, 0.8);
            }
        }
        
        .badges-section {
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }
        
        .badges-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: #FFD700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            opacity: 0.9;
        }
        
        .mobile-achievements {
            margin-bottom: 10px;
        }
        
        .mobile-achievements .achievement-badge {
            margin: 2px 4px;
            font-size: 0.6rem;
            padding: 3px 6px;
        }
        
        .mobile-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .mobile-stat {
            text-align: center;
        }
        
        .mobile-stat-value {
            font-weight: 700;
            color: #FF6F91;
            font-size: 1.1rem;
        }
        
        .mobile-stat-label {
            font-size: 0.7rem;
            opacity: 0.8;
            text-transform: uppercase;
        }
        
        .badge-progress-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-top: 15px;
            position: relative;
            z-index: 2;
        }
        
        .badge-progress-section h4 {
            color: #F5B642;
            margin-bottom: 10px;
            font-size: 1rem;
            text-align: center;
        }
        
        .progress-item {
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .progress-item.earned {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
            color: #4CAF50;
        }
        
        .progress-item.needed {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
            color: #FFC107;
        }
        

        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .clan-name {
                font-size: 2rem;
            }
            
            .header {
                padding: 20px;
                margin-bottom: 30px;
            }
            
            .tab-navigation {
                gap: 10px;
                margin-bottom: 20px;
            }
            
            .tab-btn {
                padding: 10px 18px;
                font-size: 14px;
            }
            
            .motivational-stats {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-bottom: 30px;
            }
            
            .stat-card {
                padding: 20px 15px;
            }
            
            .stat-number {
                font-size: 1.8rem;
            }
            
            .leaderboard {
                padding: 20px 15px;
            }
            
            .info-section {
                padding: 25px 20px;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .badge-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .badge-card {
                padding: 20px;
            }
            
            .scoring-categories {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .scoring-category {
                padding: 20px;
            }
            
            .category-title {
                font-size: 1.2rem;
            }
            
            .scoring-row {
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .points-value {
                font-size: 1rem;
            }
            
            .leaderboard-header {
                display: none;
            }
            
            .mobile-header {
                display: grid;
                grid-template-columns: 60px 1fr 100px;
                gap: 15px;
                padding: 15px 20px;
                background: rgba(255, 255, 255, 0.15);
                border-radius: 15px;
                margin-bottom: 20px;
                font-weight: 600;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: 1px;
                text-align: center;
            }
            
            .mobile-header-pancake {
                text-align: left;
            }
            
            .player-row {
                display: none;
            }
            
            .mobile-card {
                display: grid;
            }
            
            .rank {
                font-size: 1.2rem;
            }
            
            .player-name {
                font-size: 0.95rem;
                gap: 6px;
            }
            
            .player-name .achievement-badge,
            .player-name .trophy {
                display: none;
            }
            
            .stat {
                font-size: 0.9rem;
            }
            
            .search-input {
                font-size: 14px;
                padding: 12px 18px;
            }
            
            .motivational-message {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .motivational-text {
                font-size: 1rem;
            }
            
            .countdown-container {
                gap: 15px;
            }
            
            .countdown-timer {
                padding: 15px 20px;
            }
            
            .countdown-display {
                gap: 15px;
            }
            
            .time-unit {
                min-width: 50px;
            }
            
            .time-value {
                font-size: 1.8rem;
            }
            
            .time-label {
                font-size: 0.7rem;
            }
            
            .countdown-label {
                font-size: 1rem;
                margin-bottom: 12px;
            }
            
            .progress-bar-container {
                height: 16px;
            }
            
            .progress-percentage {
                font-size: 0.7rem;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-card {
                display: none;
            }
            
            .mobile-header {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="clan-name">🧁 STRIKE FOR CAKE 🍰</h1>

            <div class="week-info">
                📅 Weekly Period: Sunday 11:00 AM - Sunday 10:59 AM (Mexico City Time)
            </div>
            
            <div style="font-size: 0.7rem; opacity: 0.6; margin-top: 8px; text-align: center;">
                Last Updated: 11:30 AM Mexico City time
            </div>
            
            <div class="countdown-container">
                <div class="countdown-timer">
                    <div class="countdown-label">⏰ Time Remaining!</div>
                    <div class="countdown-display" id="countdownDisplay">
                        <div class="time-unit">
                            <div class="time-value" id="days">0</div>
                            <div class="time-label">Days</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="hours">0</div>
                            <div class="time-label">Hours</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="minutes">0</div>
                            <div class="time-label">Min</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="seconds">0</div>
                            <div class="time-label">Sec</div>
                        </div>
                    </div>
                </div>
                
                <div class="week-progress">
                    <div class="progress-label">Week Progress</div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="weekProgress"></div>
                        <div class="progress-percentage" id="progressPercentage">0%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-navigation">
            <button class="tab-btn active" onclick="showTab('leaderboard')">🏆 Leaderboard</button>
            <button class="tab-btn" onclick="showTab('badges')">🏅 Badge System</button>
            <button class="tab-btn" onclick="showTab('scoring')">⭐ Chest Scoring</button>
        </div>
        
        <div class="motivational-message leaderboard-only">
            <div class="motivational-text">
                <span class="celebration-emoji">🎉</span>
                <strong>Amazing work, Strike for Cake pancakes!</strong>
                <span class="celebration-emoji">🧁</span>
                <br>
                Every chest counts, every point matters! Keep baking those victories!
                <span class="celebration-emoji">🍰</span>
                <br>
                <span style="font-size: 0.8rem; font-weight: 400; font-style: normal;">Come check out this dashboard daily, Sweet Queen Bera will be updating it every day at about 10pm Mexico City</span>
            </div>
        </div>
        
        <div class="motivational-stats leaderboard-only">
            <div class="stat-card" onmouseenter="createStatCardExplosion(this, 'pancakes')" onclick="createStatCardExplosion(this, 'pancakes')">
                <div class="stat-icon">🥞</div>
                <div class="stat-number" id="totalWarriors">0</div>
                <div class="stat-label">Active Pancakes</div>
            </div>
            <div class="stat-card" onmouseenter="createStatCardExplosion(this, 'treats')" onclick="createStatCardExplosion(this, 'treats')">
                <div class="stat-icon">🍪</div>
                <div class="stat-number" id="totalChests">0</div>
                <div class="stat-label">Average Sweet Treats Per Player</div>
            </div>
            <div class="stat-card" onmouseenter="createStatCardExplosion(this, 'points')" onclick="createStatCardExplosion(this, 'points')">
                <div class="stat-icon">🏆</div>
                <div class="stat-number" id="totalScore">0</div>
                <div class="stat-label">Average Points Per Player</div>
            </div>
        </div>
        
        <div class="tab-content active" id="leaderboard-tab">
            
            <div class="leaderboard">
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="nameSearch" placeholder="🔍 Find your pancake name..." class="search-input">
                        <button onclick="clearSearch()" class="clear-btn" id="clearBtn" style="display: none;">✕</button>
                    </div>
                    <div class="search-results" id="searchResults"></div>
                </div>
                
                <div class="leaderboard-header">
                    <div>RANK</div>
                    <div>PANCAKE</div>
                    <div style="color: #FF6F91;">⭐ POINTS</div>
                    <div style="color: #FFF9F0;">🍪 TREATS</div>
                </div>
                
                <div class="mobile-header">
                    <div>RANK</div>
                    <div class="mobile-header-pancake">PANCAKE</div>
                    <div><span style="color: #FF6F91;">⭐ POINTS</span> / <span style="color: #FFF9F0;">🍪 CHESTS</span></div>
                </div>
                
                <div id="leaderboardContent">
                    <div class="empty-state">
                        <h3>🎯 Ready for Battle!</h3>
                        <p>Enter your clan's data above to see the leaderboard come to life!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="badges-tab">
            <div class="info-section">
                <h2 class="section-title">🏅 Badges Explained</h2>
                <p class="section-description">Here's how our pancakes earn their sweet achievements!</p>
                
                <div class="badge-grid">
                    <div class="badge-card">
                        <div class="badge-icon">🍪</div>
                        <div class="badge-name chest-hero">Chest Hero</div>
                        <div class="badge-requirement">Bring 100+ chests in a week</div>
                        <div class="badge-description">For pancakes who never stop collecting sweet treats! These dedicated warriors consistently gather chests day after day.</div>
                    </div>
                    
                    <div class="badge-card">
                        <div class="badge-icon">⭐</div>
                        <div class="badge-name score-legend">Legend</div>
                        <div class="badge-requirement">Score 2000+ points in a week</div>
                        <div class="badge-description">Reserved for the elite! These pancakes dominate the battlefield with incredible point totals that inspire the whole clan.</div>
                    </div>
                    
                    <div class="badge-card">
                        <div class="badge-icon">🎯</div>
                        <div class="badge-name consistent-warrior">Consistent</div>
                        <div class="badge-requirement">70+ chests AND 1000+ points</div>
                        <div class="badge-description">The backbone of our clan! These reliable pancakes balance both chest collection and point scoring consistently.</div>
                    </div>
                </div>
                
                <div class="badge-tips">
                    <h3>💡 Tips to Earn Badges</h3>
                    <ul>
                        <li>Always participate on Tinman and bring home all 13 chests</li>
                        <li>Always participate on Ragnarok and bring home all 5 chests</li>
                        <li>Always participate in Olympus and bring home as many Tartaros chests as you can!</li>
                        <li>In a nutshell: Focus on daily activities, participate in events, and never miss a chest opportunity!</li>
                        <li>Target high-value activities like Epic Monsters, Epic crypts and always bring chests from citadels or crypts level 15 and above, as level 5 and 10 has no value.</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="scoring-tab">
            <div class="info-section">
                <h2 class="section-title">⭐ Chest Scoring System</h2>
                <p class="section-description">Every chest type has a different point value. Here's the complete breakdown!</p>
                
                <div class="scoring-categories">
                    <div class="scoring-category">
                        <h3 class="category-title">🏛️ Epic Squads & Special</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Chest Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Epic Undead squad</div>
                                <div class="points-value">200</div>
                            </div>
                            <div class="scoring-row">
                                <div>Shadow City</div>
                                <div class="points-value">200</div>
                            </div>
                            <div class="scoring-row">
                                <div>Magic Chest</div>
                                <div class="points-value">100</div>
                            </div>
                            <div class="scoring-row">
                                <div>Epic Ancient squad</div>
                                <div class="points-value">50</div>
                            </div>
                            <div class="scoring-row">
                                <div>Hermes' Store</div>
                                <div class="points-value">50</div>
                            </div>
                            <div class="scoring-row">
                                <div>Jormungandr Shop</div>
                                <div class="points-value">50</div>
                            </div>
                            <div class="scoring-row">
                                <div>Precious Chest</div>
                                <div class="points-value">50</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">🐉 Heroic Monsters</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Monster Level</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 31-45 heroic Monster</div>
                                <div class="points-value">100</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 26-30 heroic Monster</div>
                                <div class="points-value">60</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 21-25 heroic Monster</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 16-20 heroic Monster</div>
                                <div class="points-value">20</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">🏰 Citadels</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Citadel Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 30 Citadel</div>
                                <div class="points-value">60</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25 Citadel</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25 cursed Citadel</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20 Citadel</div>
                                <div class="points-value">15</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20 cursed Citadel</div>
                                <div class="points-value">15</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 15 Citadel</div>
                                <div class="points-value">10</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 10 Citadel</div>
                                <div class="points-value">1</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">🗝️ Crypts</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Crypt Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 35 epic Crypt</div>
                                <div class="points-value">70</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 30 rare Crypt</div>
                                <div class="points-value">60</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25 rare Crypt</div>
                                <div class="points-value">50</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 30 epic Crypt</div>
                                <div class="points-value">50</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25 Crypt</div>
                                <div class="points-value">36</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25 epic Crypt</div>
                                <div class="points-value">36</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20 rare Crypt</div>
                                <div class="points-value">35</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20 epic Crypt</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Tartaros Crypt</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20 Crypt</div>
                                <div class="points-value">20</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 15 Crypt</div>
                                <div class="points-value">15</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 15 epic Crypt</div>
                                <div class="points-value">10</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 15 rare Crypt</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 10 rare Crypt</div>
                                <div class="points-value">3</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 10 Crypt</div>
                                <div class="points-value">1</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 5 Crypt</div>
                                <div class="points-value">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">🏺 Vault of the Ancients</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Vault Level</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 40-44 Vault</div>
                                <div class="points-value">40</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 35-39 Vault</div>
                                <div class="points-value">35</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 30-34 Vault</div>
                                <div class="points-value">30</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 25-29 Vault</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 20-24 Vault</div>
                                <div class="points-value">20</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 15-19 Vault</div>
                                <div class="points-value">15</div>
                            </div>
                            <div class="scoring-row">
                                <div>Level 10-14 Vault</div>
                                <div class="points-value">10</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">⚔️ Raid & Events</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Activity Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Lvl 35-39 Raid Runic squad</div>
                                <div class="points-value">35</div>
                            </div>
                            <div class="scoring-row">
                                <div>Lvl 30-34 Raid Runic squad</div>
                                <div class="points-value">30</div>
                            </div>
                            <div class="scoring-row">
                                <div>Rise of the Ancients event</div>
                                <div class="points-value">30</div>
                            </div>
                            <div class="scoring-row">
                                <div>Authority Rush tournament</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Lvl 25-29 Raid Runic squad</div>
                                <div class="points-value">20</div>
                            </div>
                            <div class="scoring-row">
                                <div>Snowman</div>
                                <div class="points-value">20</div>
                            </div>
                            <div class="scoring-row">
                                <div>Lvl 20-24 Raid Runic squad</div>
                                <div class="points-value">10</div>
                            </div>
                            <div class="scoring-row">
                                <div>Sacred Rituals tournament</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>The Great Hunt tournament</div>
                                <div class="points-value">5</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">📦 Treasure Chests</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Chest Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Golden Chest</div>
                                <div class="points-value">25</div>
                            </div>
                            <div class="scoring-row">
                                <div>Silver Chest</div>
                                <div class="points-value">20</div>
                            </div>
                            <div class="scoring-row">
                                <div>Bronze Chest</div>
                                <div class="points-value">15</div>
                            </div>
                            <div class="scoring-row">
                                <div>Wooden Chest</div>
                                <div class="points-value">10</div>
                            </div>
                            <div class="scoring-row">
                                <div>Conqueror's Chest</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Mimic Chest</div>
                                <div class="points-value">5</div>
                            </div>
                        </div>
                    </div>

                    <div class="scoring-category">
                        <h3 class="category-title">🎯 Other Activities</h3>
                        <div class="scoring-table">
                            <div class="scoring-row header">
                                <div>Activity Type</div>
                                <div>Points</div>
                            </div>
                            <div class="scoring-row">
                                <div>Arena</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Clan wealth</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Mercenary Exchange</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Story</div>
                                <div class="points-value">5</div>
                            </div>
                            <div class="scoring-row">
                                <div>Union of Triumph personal reward</div>
                                <div class="points-value">5</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="scoring-tips">
                    <h3>💡 Scoring Strategy Tips</h3>
                    <ul>
                        <li><strong>Focus on Epic Monsters:</strong> 200 points each - the highest value activity! (Try to get the final hit on Doomsday, Armageddon, Ragnarok beasts, etc)</li>
                        <li><strong>Target Epic and Rare crypts:</strong> Don't ignore medium value, Consistent level 15 crypts or citadels add up quickly.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Player Modal -->
    <div class="player-modal" id="playerModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closePlayerModal()">✕</button>
            <div class="modal-rank" id="modalRank">#1</div>
            <div class="floating-player-name" id="modalPlayerName">Player Name</div>
            
            <div class="badges-section">
                <div class="badges-title">🏅 Achievements</div>
                <div class="mobile-achievements" id="modalBadges">
                    <!-- Badges will be inserted here -->
                </div>
            </div>
            
            <div class="mobile-stats">
                <div class="mobile-stat">
                    <div class="mobile-stat-value" id="modalScore">0</div>
                    <div class="mobile-stat-label">⭐ Points</div>
                </div>
                <div class="mobile-stat">
                    <div class="mobile-stat-value" id="modalChests">0</div>
                    <div class="mobile-stat-label">🍪 Chests</div>
                </div>
            </div>
            
            <div class="badge-progress-section" id="modalProgress">
                <!-- Progress info will be inserted here -->
            </div>
        </div>
    </div>

    <script>

        
        function createEmojiExplosion(element, rank) {
            const emojis = {
                1: ['✨', '🌟', '⭐', '💫', '🏆', '👑', '💎'], // Golden emojis
                2: ['🥈', '⚡', '💫', '🌙', '⭐', '✨', '🔮'], // Silver emojis  
                3: ['🥉', '🍂', '🌰', '🧡', '🔥', '⚡', '✨']  // Bronze emojis
            };
            
            const colors = {
                1: '#ffd700', // Gold
                2: '#c0c0c0', // Silver
                3: '#cd7f32'  // Bronze
            };
            
            const emojiSet = emojis[rank] || emojis[1];
            const color = colors[rank] || colors[1];
            
            // Find the player name element to anchor from
            const playerNameElement = element.querySelector('.player-name');
            if (!playerNameElement) return;
            
            // Get the position of the player name relative to the row
            const rowRect = element.getBoundingClientRect();
            const nameRect = playerNameElement.getBoundingClientRect();
            const anchorX = nameRect.left - rowRect.left + (nameRect.width / 2);
            const anchorY = nameRect.top - rowRect.top + (nameRect.height / 2);
            
            // Create explosion container
            const explosion = document.createElement('div');
            explosion.className = 'emoji-explosion';
            explosion.style.left = anchorX + 'px';
            explosion.style.top = anchorY + 'px';
            element.appendChild(explosion);
            
            // Create multiple emoji particles with organic movement patterns
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'emoji-particle';
                particle.textContent = emojiSet[Math.floor(Math.random() * emojiSet.length)];
                particle.style.color = color;
                particle.style.textShadow = `0 0 15px ${color}`;
                
                // Create organic, flowing movement patterns
                const baseAngle = (i / 15) * 2 * Math.PI;
                const angleVariation = (Math.random() - 0.5) * 0.8; // Add some randomness
                const angle = baseAngle + angleVariation;
                
                // Vary distances for more natural spread
                const baseDistance = 40 + (i % 3) * 20; // Create layers
                const distanceVariation = Math.random() * 25;
                const distance = baseDistance + distanceVariation;
                
                // Create flowing, curved paths instead of straight lines
                const controlX1 = Math.cos(angle) * (distance * 0.3) + (Math.random() - 0.5) * 30;
                const controlY1 = Math.sin(angle) * (distance * 0.3) + (Math.random() - 0.5) * 20;
                const controlX2 = Math.cos(angle) * (distance * 0.7) + (Math.random() - 0.5) * 40;
                const controlY2 = Math.sin(angle) * (distance * 0.7) + (Math.random() - 0.5) * 30;
                const endX = Math.cos(angle) * distance + (Math.random() - 0.5) * 20;
                const endY = Math.sin(angle) * distance + (Math.random() - 0.5) * 15;
                
                // Add some upward bias for a more celebratory feel
                const upwardBias = -Math.abs(Math.sin(angle)) * 20;
                
                particle.style.left = '0px';
                particle.style.top = '0px';
                
                // Create unique organic animation for each particle
                const animationName = `organicExplode-${rank}-${i}-${Date.now()}`;
                const duration = 2 + Math.random() * 1; // Vary duration for more organic feel
                particle.style.animation = `${animationName} ${duration}s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards`;
                
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animationName} {
                        0% {
                            opacity: 1;
                            transform: translate(0px, 0px) scale(0) rotate(0deg);
                        }
                        15% {
                            opacity: 1;
                            transform: translate(${controlX1}px, ${controlY1 + upwardBias * 0.3}px) scale(0.8) rotate(${Math.random() * 180}deg);
                        }
                        35% {
                            opacity: 1;
                            transform: translate(${controlX2}px, ${controlY2 + upwardBias * 0.6}px) scale(1.2) rotate(${180 + Math.random() * 180}deg);
                        }
                        65% {
                            opacity: 0.9;
                            transform: translate(${endX * 0.8}px, ${endY * 0.8 + upwardBias * 0.8}px) scale(1.1) rotate(${270 + Math.random() * 180}deg);
                        }
                        85% {
                            opacity: 0.6;
                            transform: translate(${endX}px, ${endY + upwardBias}px) scale(0.9) rotate(${360 + Math.random() * 180}deg);
                        }
                        100% {
                            opacity: 0;
                            transform: translate(${endX + (Math.random() - 0.5) * 20}px, ${endY + upwardBias - 10}px) scale(0.3) rotate(${450 + Math.random() * 180}deg);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                explosion.appendChild(particle);
                
                // Clean up after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                }, duration * 1000 + 100);
            }
            
            // Clean up explosion container
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.parentNode.removeChild(explosion);
                }
            }, 3500);
        }
        
        function createStatCardExplosion(element, type) {
            const emojiSets = {
                'pancakes': ['🥞', '👏', '🎉', '✨', '🌟', '💫', '🎊', '🙌', '👏', '🥳'],
                'treats': ['🍪', '🎁', '✨', '🌟', '💝', '🎀', '🧁', '🍰', '💫', '🎊'],
                'points': ['💪', '⭐', '🌟', '✨', '💫', '🏆', '🔥', '⚡', '💥', '🎯']
            };
            
            const colors = {
                'pancakes': '#F5B642',
                'treats': '#FF6F91', 
                'points': '#4ECDC4'
            };
            
            const emojiSet = emojiSets[type] || emojiSets['pancakes'];
            const color = colors[type] || colors['pancakes'];
            
            // Create explosion container
            const explosion = document.createElement('div');
            explosion.className = 'stat-explosion';
            element.appendChild(explosion);
            
            // Create multiple emoji particles
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'stat-emoji-particle';
                particle.textContent = emojiSet[Math.floor(Math.random() * emojiSet.length)];
                particle.style.color = color;
                particle.style.textShadow = `0 0 15px ${color}`;
                
                // Random position around the element
                const angle = (i / 15) * 2 * Math.PI + (Math.random() * 0.5 - 0.25);
                const distance = 40 + Math.random() * 40;
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;
                
                particle.style.left = '0px';
                particle.style.top = '0px';
                
                // Create unique keyframe for each particle
                const animationName = `statExplode-${type}-${i}-${Date.now()}`;
                particle.style.animation = `${animationName} 2s ease-out forwards`;
                
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animationName} {
                        0% {
                            opacity: 1;
                            transform: scale(0) rotate(0deg);
                        }
                        30% {
                            opacity: 1;
                            transform: translate(${x * 0.3}px, ${y * 0.3}px) scale(1.3) rotate(120deg);
                        }
                        70% {
                            opacity: 0.8;
                            transform: translate(${x * 0.7}px, ${y * 0.7}px) scale(1.1) rotate(240deg);
                        }
                        100% {
                            opacity: 0;
                            transform: translate(${x}px, ${y}px) scale(0.7) rotate(360deg);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                explosion.appendChild(particle);
                
                // Clean up after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                    if (style.parentNode) {
                        style.parentNode.removeChild(style);
                    }
                }, 2000);
            }
            
            // Clean up explosion container
            setTimeout(() => {
                if (explosion.parentNode) {
                    explosion.parentNode.removeChild(explosion);
                }
            }, 2100);
        }



        // Magical cursor functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Create magical cursor
            const magicCursor = document.createElement('div');
            magicCursor.className = 'magic-cursor';
            document.body.appendChild(magicCursor);
            
            // Track mouse movement
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // Create magical trail
                createMagicTrail(mouseX, mouseY);
            });
            
            // Smooth cursor following
            function animateCursor() {
                const dx = mouseX - cursorX;
                const dy = mouseY - cursorY;
                
                cursorX += dx * 0.1;
                cursorY += dy * 0.1;
                
                magicCursor.style.left = cursorX - 10 + 'px';
                magicCursor.style.top = cursorY - 10 + 'px';
                
                requestAnimationFrame(animateCursor);
            }
            animateCursor();
            
            // Create magical trail particles
            function createMagicTrail(x, y) {
                const trail = document.createElement('div');
                trail.className = 'magic-trail';
                trail.style.left = x - 3 + 'px';
                trail.style.top = y - 3 + 'px';
                document.body.appendChild(trail);
                
                // Remove trail after animation
                setTimeout(() => {
                    if (trail.parentNode) {
                        trail.parentNode.removeChild(trail);
                    }
                }, 800);
            }
            
            // Add hover effects for interactive elements
            const interactiveElements = document.querySelectorAll('button, .player-row, .stat-card, .update-btn');
            interactiveElements.forEach(element => {
                element.addEventListener('mouseenter', () => {
                    magicCursor.style.transform = 'scale(1.3)';
                    magicCursor.style.background = 'radial-gradient(circle, rgba(255, 182, 193, 0.9), rgba(255, 192, 203, 0.4))';
                    magicCursor.style.boxShadow = '0 0 20px rgba(255, 182, 193, 0.6), 0 0 40px rgba(255, 192, 203, 0.4)';
                });
                
                element.addEventListener('mouseleave', () => {
                    magicCursor.style.transform = 'scale(1)';
                    magicCursor.style.background = 'radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.3))';
                    magicCursor.style.boxShadow = '0 0 15px rgba(255, 255, 255, 0.6), 0 0 30px rgba(255, 255, 255, 0.4), 0 0 45px rgba(255, 255, 255, 0.2)';
                });
            });
        });

        // Countdown timer functionality
        function updateCountdown() {
            try {
                const now = new Date();
                
                // Create Mexico City time using proper timezone handling
                const mexicoTime = new Date(now.toLocaleString("en-US", {timeZone: "America/Mexico_City"}));
                
                // Find next Sunday at 10:59 AM Mexico City time
                let nextSunday = new Date(mexicoTime);
                const currentDay = mexicoTime.getDay(); // 0 = Sunday, 1 = Monday, etc.
                
                if (currentDay === 0) {
                    // It's Sunday - check if it's before 10:59 AM
                    const currentHour = mexicoTime.getHours();
                    const currentMinute = mexicoTime.getMinutes();
                    
                    if (currentHour < 10 || (currentHour === 10 && currentMinute < 59)) {
                        // Still this week - target today at 10:59 AM
                        nextSunday.setHours(10, 59, 0, 0);
                    } else {
                        // This week is over - target next Sunday
                        nextSunday.setDate(nextSunday.getDate() + 7);
                        nextSunday.setHours(10, 59, 0, 0);
                    }
                } else {
                    // Not Sunday - calculate days until next Sunday
                    const daysUntilSunday = 7 - currentDay;
                    nextSunday.setDate(nextSunday.getDate() + daysUntilSunday);
                    nextSunday.setHours(10, 59, 0, 0);
                }
                
                // Calculate time difference in milliseconds
                const timeDiff = nextSunday.getTime() - mexicoTime.getTime();
                
                if (timeDiff > 0) {
                    const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                    
                    // Update countdown display
                    const daysEl = document.getElementById('days');
                    const hoursEl = document.getElementById('hours');
                    const minutesEl = document.getElementById('minutes');
                    const secondsEl = document.getElementById('seconds');
                    
                    if (daysEl) daysEl.textContent = days.toString().padStart(2, '0');
                    if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
                    if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
                    if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
                    
                    // Calculate week progress - from last Sunday 11:00 AM to next Sunday 10:59 AM
                    const lastSunday = new Date(nextSunday.getTime() - (7 * 24 * 60 * 60 * 1000));
                    lastSunday.setHours(11, 0, 0, 0); // Week starts at 11:00 AM
                    
                    const weekDuration = nextSunday.getTime() - lastSunday.getTime();
                    const weekElapsed = Math.max(0, mexicoTime.getTime() - lastSunday.getTime());
                    const progressPercentage = Math.max(0, Math.min(100, (weekElapsed / weekDuration) * 100));
                    
                    // Update progress bar
                    const progressBar = document.getElementById('weekProgress');
                    const progressText = document.getElementById('progressPercentage');
                    
                    if (progressBar) progressBar.style.width = progressPercentage + '%';
                    if (progressText) progressText.textContent = Math.round(progressPercentage) + '%';
                    
                } else {
                    // Week has ended - show zeros
                    const daysEl = document.getElementById('days');
                    const hoursEl = document.getElementById('hours');
                    const minutesEl = document.getElementById('minutes');
                    const secondsEl = document.getElementById('seconds');
                    
                    if (daysEl) daysEl.textContent = '00';
                    if (hoursEl) hoursEl.textContent = '00';
                    if (minutesEl) minutesEl.textContent = '00';
                    if (secondsEl) secondsEl.textContent = '00';
                    
                    const progressBar = document.getElementById('weekProgress');
                    const progressText = document.getElementById('progressPercentage');
                    
                    if (progressBar) progressBar.style.width = '100%';
                    if (progressText) progressText.textContent = '100%';
                }
            } catch (error) {
                console.error('Countdown error:', error);
                // Fallback display
                const elements = ['days', 'hours', 'minutes', 'seconds'];
                elements.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) el.textContent = '--';
                });
            }
        }
        
        // Hardcoded player data
        const hardcodedPlayerData = `Abisai,310,22
Adoragar,178,13
aghaté tyché,250,20
Ahhhmeddd,351,16
AKH,339,23
Akigrel,165,17
Andi,1211,41
Angie,10,1
AnyaBlu2,200,14
Apollo Jr,180,13
Art,305,19
Beydeland,391,18
BigT,1118,36
Breadandroses,699,36
Brianna,600,30
Captain LemonBars,305,16
Cedora,1153,90
Chirikawa,925,39
Chrisbreezy,580,32
Chrisw333,300,15
Ciditoo,240,13
De Majico,100,10
Diabolik zius,30,7
Eddy,301,13
Enneen,325,25
Enzo,60,3
Eyar Fiery,280,18
Eyrondef,310,28
Fankayel,415,18
Filor,75,3
Fiorella,122,12
GAVILAN,90,6
Gazius,868,64
Ghodred,150,10
Gririm,445,27
guicarde,109,10
higgowoman,605,40
IPollo,255,15
Ironsinger,23,4
Jack Oswald,634,15
Jarven,365,18
Johnny B Goode,1061,43
JoseA,418,25
Kalabar,282,11
Kamil,176,8
Kantrius,36,1
Kigam,210,15
Klaudia,130,6
Kosak,281,11
LanZius,120,6
Lava Lynx Zius,1066,46
Lebrim,150,11
Lenochodi CP,350,20
Lorbrimir,86,3
Lord Crumble,430,32
Luuuu IT,522,27
Mabrinod,77,67
Mag Ualghairg,370,22
Magepick,135,9
Marcelo lord of war,771,53
Marilune,115,7
Masa Madre Momuro,745,45
Mejas,75,3
Monte,1050,63
Moogujora,130,7
Natia Steel,475,16
Nice n Spicy Sers,206,9
Nimvenilas,270,19
ouragan,132,12
PanekPL,778,27
Periwyn,120,9
Prince Charming,220,15
Ra,125,7
Ragnar,110,8
Reiner,228,17
Sabar,170,15
Satoru Gojo,748,67
Showman,1045,92
Souffleblue,350,19
SPARTACUS,195,13
Sudoki,347,15
Taugal,704,27
Tera,230,22
Thorgal,316,56
TuTo Il,405,27
Tygonris,120,9
uzun shapalak,120,8
VallesDH,180,14
wiking,123,11
Yotanka,295,15
zhasur,230,11
Zombie Tony,681,30`;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Start countdown timer
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Load hardcoded data immediately
            loadHardcodedData();
            
            // Setup mobile tap effects for player names
            setupMobileTapEffects();
        });
        
        function loadHardcodedData() {
            // Parse the hardcoded data
            const players = [];
            const lines = hardcodedPlayerData.split('\n');
            
            for (let line of lines) {
                line = line.trim();
                if (line) {
                    const parts = line.split(',');
                    if (parts.length >= 3) {
                        players.push({
                            name: parts[0].trim(),
                            score: parseInt(parts[1].trim()) || 0,
                            chests: parseInt(parts[2].trim()) || 0
                        });
                    }
                }
            }
            
            if (players.length === 0) {
                return;
            }
            
            // Calculate and update stats
            const totalPlayers = players.length;
            const totalChests = players.reduce((sum, p) => sum + p.chests, 0);
            const totalScore = players.reduce((sum, p) => sum + p.score, 0);
            const avgChests = Math.round(totalChests / totalPlayers);
            const avgScore = Math.round(totalScore / totalPlayers);
            
            document.getElementById('totalWarriors').textContent = totalPlayers.toLocaleString();
            document.getElementById('totalChests').textContent = avgChests.toLocaleString();
            document.getElementById('totalScore').textContent = avgScore.toLocaleString();
            
            // Sort by score (highest first)
            players.sort((a, b) => b.score - a.score);
            
            // Generate leaderboard HTML
            const content = document.getElementById('leaderboardContent');
            let html = '';
            players.forEach((player, index) => {
                const rank = index + 1;
                let rankClass = '';
                let trophy = '';
                let rowClass = '';
                let badges = '';
                
                if (rank === 1) {
                    rankClass = 'rank-1';
                    trophy = '🏆';
                    rowClass = 'top-3';
                } else if (rank === 2) {
                    rankClass = 'rank-2';
                    trophy = '🥈';
                    rowClass = 'top-3';
                } else if (rank === 3) {
                    rankClass = 'rank-3';
                    trophy = '🥉';
                    rowClass = 'top-3';
                }
                
                // Achievement badges and progress tracking
                let earnedBadges = [];
                let badgeProgress = '';
                
                if (player.chests >= 100) {
                    badges += '<span class="achievement-badge chest-hero">Chest Hero</span>';
                    earnedBadges.push('chest-hero');
                }
                if (player.score >= 2000) {
                    badges += '<span class="achievement-badge score-legend">Legend</span>';
                    earnedBadges.push('legend');
                }
                if (player.chests >= 70 && player.score >= 1000) {
                    badges += '<span class="achievement-badge consistent-warrior">Consistent</span>';
                    earnedBadges.push('consistent');
                }
                
                // Calculate badge progress for players without badges
                if (earnedBadges.length === 0) {
                    // Calculate distances to each badge
                    const toChestHero = Math.max(0, 100 - player.chests);
                    const toLegend = Math.max(0, 2000 - player.score);
                    const toConsistentChests = Math.max(0, 70 - player.chests);
                    const toConsistentPoints = Math.max(0, 1000 - player.score);
                    
                    // Find the closest badge
                    if (toChestHero === 0 || toLegend === 0 || (toConsistentChests === 0 && toConsistentPoints === 0)) {
                        // Should have a badge but doesn't - edge case
                        badgeProgress = 'No badges earned yet';
                    } else if (toChestHero <= toLegend && toChestHero <= Math.max(toConsistentChests, toConsistentPoints)) {
                        // Closest to Chest Hero
                        badgeProgress = `🍪 Only ${toChestHero} more chests to earn the hero badge!`;
                    } else if (toLegend <= Math.max(toConsistentChests, toConsistentPoints)) {
                        // Closest to Legend
                        badgeProgress = `⭐ Only ${toLegend} more points to become a legend!`;
                    } else {
                        // Closest to Consistent
                        if (toConsistentChests > 0 && toConsistentPoints > 0) {
                            badgeProgress = `🎯 Only ${toConsistentChests} chests & ${toConsistentPoints} points to earn consistent badge!`;
                        } else if (toConsistentChests > 0) {
                            badgeProgress = `🎯 Only ${toConsistentChests} more chests to earn consistent badge!`;
                        } else if (toConsistentPoints > 0) {
                            badgeProgress = `🎯 Only ${toConsistentPoints} more points to earn consistent badge!`;
                        }
                    }
                } else if (earnedBadges.length < 3) {
                    // Has some badges but not all - show progress to remaining badges
                    let remainingProgress = [];
                    
                    if (!earnedBadges.includes('chest-hero') && player.chests < 100) {
                        const toChestHero = 100 - player.chests;
                        remainingProgress.push({distance: toChestHero, text: `🍪 Only ${toChestHero} more chests to earn the hero badge!`});
                    }
                    
                    if (!earnedBadges.includes('legend') && player.score < 2000) {
                        const toLegend = 2000 - player.score;
                        remainingProgress.push({distance: toLegend, text: `⭐ Only ${toLegend} more points to become a legend!`});
                    }
                    
                    if (!earnedBadges.includes('consistent')) {
                        const toConsistentChests = Math.max(0, 70 - player.chests);
                        const toConsistentPoints = Math.max(0, 1000 - player.score);
                        if (toConsistentChests > 0 || toConsistentPoints > 0) {
                            if (toConsistentChests > 0 && toConsistentPoints > 0) {
                                remainingProgress.push({distance: Math.max(toConsistentChests, toConsistentPoints), text: `🎯 Only ${toConsistentChests} chests & ${toConsistentPoints} points to earn consistent badge!`});
                            } else if (toConsistentChests > 0) {
                                remainingProgress.push({distance: toConsistentChests, text: `🎯 Only ${toConsistentChests} more chests to earn consistent badge!`});
                            } else {
                                remainingProgress.push({distance: toConsistentPoints, text: `🎯 Only ${toConsistentPoints} more points to earn consistent badge!`});
                            }
                        }
                    }
                    
                    // Show the closest remaining badge
                    if (remainingProgress.length > 0) {
                        remainingProgress.sort((a, b) => a.distance - b.distance);
                        badgeProgress = remainingProgress[0].text;
                    }
                }
                
                // Check if badge progress message is long and should go on separate row
                const isLongMessage = badgeProgress.length > 50;
                
                html += `
                    <div class="player-row ${rowClass}" ${rank <= 3 ? `onmouseenter="createEmojiExplosion(this, ${rank})"` : ''}>
                        <div class="rank ${rankClass}">#${rank}</div>
                        <div class="player-name">
                            <span class="clan-emblem">🧁</span>
                            ${player.name}
                            ${trophy}
                            ${badges}
                            ${!isLongMessage ? `<span class="badge-progress">${badgeProgress}</span>` : ''}
                        </div>
                        <div class="stat score">⭐ ${player.score.toLocaleString()}</div>
                        <div class="stat">🍪 ${player.chests}</div>
                        ${isLongMessage ? `<div class="badge-progress-row"><span class="badge-progress">${badgeProgress}</span></div>` : ''}
                    </div>
                    
                    <div class="mobile-card ${rowClass}"
                         data-rank="${rank}"
                         data-name="${player.name}"
                         data-score="${player.score}"
                         data-chests="${player.chests}"
                         data-badges="${badges}"
                         data-badge-progress="${badgeProgress}">
                        <div class="mobile-card-row1">
                            <div class="mobile-rank ${rankClass}">#${rank}</div>
                            <div class="mobile-player-name">
                                <span class="clan-emblem">🧁</span>
                                ${player.name}
                                ${trophy}
                            </div>
                        </div>
                        <div class="mobile-card-row2">
                            <div class="mobile-badges">
                                ${badges}
                            </div>
                            <div class="mobile-stats">
                                <div class="mobile-score">⭐ ${player.score.toLocaleString()}</div>
                                <div class="mobile-chests">🍪 ${player.chests}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
            
            // Setup search functionality
            setupSearch(players);
            
            // Setup mobile card click handlers
            setupMobileCardHandlers();

        }
        

        
        // Search functionality
        function setupSearch(players) {
            const searchInput = document.getElementById('nameSearch');
            const clearBtn = document.getElementById('clearBtn');
            const searchResults = document.getElementById('searchResults');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.trim().toLowerCase();
                
                if (searchTerm.length > 0) {
                    clearBtn.style.display = 'flex';
                    performSearch(searchTerm, players);
                } else {
                    clearBtn.style.display = 'none';
                    clearSearch();
                }
            });
            
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const searchTerm = this.value.trim().toLowerCase();
                    if (searchTerm.length > 0) {
                        performSearch(searchTerm, players);
                    }
                }
            });
        }
        
        function performSearch(searchTerm, players) {
            const searchResults = document.getElementById('searchResults');
            const playerRows = document.querySelectorAll('.player-row');
            
            // Store original HTML for each row to restore later
            if (!window.originalRowHTML) {
                window.originalRowHTML = new Map();
                playerRows.forEach((row, index) => {
                    window.originalRowHTML.set(index, row.querySelector('.player-name').innerHTML);
                });
            }
            
            // Remove previous highlights and matches, restore original HTML
            playerRows.forEach((row, index) => {
                row.classList.remove('search-match');
                const nameElement = row.querySelector('.player-name');
                if (nameElement && window.originalRowHTML.has(index)) {
                    nameElement.innerHTML = window.originalRowHTML.get(index);
                }
            });
            
            // Find matches
            let matches = [];
            playerRows.forEach((row, index) => {
                const nameElement = row.querySelector('.player-name');
                if (nameElement) {
                    // Extract just the player name (after emoji, before trophy and badges)
                    const textContent = nameElement.textContent;
                    const afterEmoji = textContent.replace('🧁', '').trim();
                    
                    // Find the actual player name by matching with our data
                    const matchingPlayer = players.find(p => afterEmoji.includes(p.name));
                    
                    if (matchingPlayer && matchingPlayer.name.toLowerCase().includes(searchTerm)) {
                        matches.push({row, playerName: matchingPlayer.name, index});
                        
                        // Highlight the match
                        row.classList.add('search-match');
                        
                        // Highlight only the player name part, preserving badges and trophies
                        const regex = new RegExp(`(${searchTerm})`, 'gi');
                        const highlightedName = matchingPlayer.name.replace(regex, '<span class="highlight-match">$1</span>');
                        
                        // Replace only the player name in the HTML, keeping everything else intact
                        const currentHTML = nameElement.innerHTML;
                        const newHTML = currentHTML.replace(matchingPlayer.name, highlightedName);
                        nameElement.innerHTML = newHTML;
                        
                        // Scroll to first match
                        if (matches.length === 1) {
                            setTimeout(() => {
                                row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }, 100);
                        }
                    }
                }
            });
            
            // Update search results
            if (matches.length > 0) {
                if (matches.length === 1) {
                    const rank = matches[0].index + 1;
                    searchResults.innerHTML = `🎯 Found "${matches[0].playerName}" at rank #${rank}!`;
                } else {
                    searchResults.innerHTML = `🔍 Found ${matches.length} pancakes matching "${searchTerm}"`;
                }
            } else {
                searchResults.innerHTML = `😔 No pancakes found matching "${searchTerm}"`;
            }
        }
        
        function clearSearch() {
            const searchInput = document.getElementById('nameSearch');
            const clearBtn = document.getElementById('clearBtn');
            const searchResults = document.getElementById('searchResults');
            const playerRows = document.querySelectorAll('.player-row');
            
            searchInput.value = '';
            clearBtn.style.display = 'none';
            searchResults.innerHTML = '';
            
            // Remove all search highlights and matches, restore original HTML
            playerRows.forEach((row, index) => {
                row.classList.remove('search-match');
                const nameElement = row.querySelector('.player-name');
                if (nameElement && window.originalRowHTML && window.originalRowHTML.has(index)) {
                    nameElement.innerHTML = window.originalRowHTML.get(index);
                }
            });
        }
        

        
        function setupMobileCardHandlers() {
            // Remove any existing listeners first
            const existingCards = document.querySelectorAll('.mobile-card');
            existingCards.forEach(card => {
                card.replaceWith(card.cloneNode(true));
            });
            
            // Add click listeners to all mobile cards
            document.querySelectorAll('.mobile-card').forEach(card => {
                card.addEventListener('click', function() {
                    const rank = this.getAttribute('data-rank');
                    const name = this.getAttribute('data-name');
                    const score = this.getAttribute('data-score');
                    const chests = this.getAttribute('data-chests');
                    const badges = this.getAttribute('data-badges');
                    const badgeProgress = this.getAttribute('data-badge-progress');
                    
                    showPlayerModal(rank, name, score, chests, badges, badgeProgress);
                });
            });
        }
        
        function setupMobileTapEffects() {
            // Mobile tap effects are now handled by the modal onclick events
            // This function is kept for compatibility but no longer needed
        }
        
        function showPlayerModal(rank, playerName, score, chests, badges, badgeProgress) {
            const modal = document.getElementById('playerModal');
            const modalRank = document.getElementById('modalRank');
            const modalPlayerName = document.getElementById('modalPlayerName');
            const modalScore = document.getElementById('modalScore');
            const modalChests = document.getElementById('modalChests');
            const modalBadges = document.getElementById('modalBadges');
            const modalProgress = document.getElementById('modalProgress');
            
            // Set basic info
            modalRank.textContent = `#${rank}`;
            modalRank.className = `modal-rank ${rank <= 3 ? `rank-${rank}` : ''}`;
            modalPlayerName.textContent = playerName;
            modalScore.textContent = score.toLocaleString();
            modalChests.textContent = chests;
            
            // Set badges
            modalBadges.innerHTML = badges || '<span style="opacity: 0.6; font-style: italic;">No badges earned yet</span>';
            
            // Calculate detailed badge progress
            let progressHTML = '<h4>🎯 Badge Progress</h4>';
            
            // Check which badges are earned
            const hasChestHero = badges.includes('Chest Hero');
            const hasLegend = badges.includes('Legend');
            const hasConsistent = badges.includes('Consistent');
            
            // Chest Hero progress
            if (hasChestHero) {
                progressHTML += '<div class="progress-item earned">🍪 <strong>Chest Hero</strong> - ✅ Earned! (100+ chests)</div>';
            } else {
                const needed = Math.max(0, 100 - chests);
                if (needed === 0) {
                    progressHTML += '<div class="progress-item earned">🍪 <strong>Chest Hero</strong> - ✅ Ready to earn! You have enough chests!</div>';
                } else {
                    progressHTML += `<div class="progress-item needed">🍪 <strong>Chest Hero</strong> - Need ${needed} more chests (currently ${chests}/100)</div>`;
                }
            }
            
            // Legend progress
            if (hasLegend) {
                progressHTML += '<div class="progress-item earned">⭐ <strong>Legend</strong> - ✅ Earned! (2000+ points)</div>';
            } else {
                const needed = Math.max(0, 2000 - score);
                if (needed === 0) {
                    progressHTML += '<div class="progress-item earned">⭐ <strong>Legend</strong> - ✅ Ready to earn! You have enough points!</div>';
                } else {
                    progressHTML += `<div class="progress-item needed">⭐ <strong>Legend</strong> - Need ${needed} more points (currently ${score.toLocaleString()}/2000)</div>`;
                }
            }
            
            // Consistent progress
            if (hasConsistent) {
                progressHTML += '<div class="progress-item earned">🎯 <strong>Consistent</strong> - ✅ Earned! (70+ chests AND 1000+ points)</div>';
            } else {
                const chestsNeeded = Math.max(0, 70 - chests);
                const pointsNeeded = Math.max(0, 1000 - score);
                
                if (chestsNeeded === 0 && pointsNeeded === 0) {
                    progressHTML += '<div class="progress-item earned">🎯 <strong>Consistent</strong> - ✅ Ready to earn! You meet both requirements!</div>';
                } else if (chestsNeeded === 0) {
                    progressHTML += `<div class="progress-item needed">🎯 <strong>Consistent</strong> - Need ${pointsNeeded} more points (chests: ✅ ${chests}/70, points: ${score.toLocaleString()}/1000)</div>`;
                } else if (pointsNeeded === 0) {
                    progressHTML += `<div class="progress-item needed">🎯 <strong>Consistent</strong> - Need ${chestsNeeded} more chests (chests: ${chests}/70, points: ✅ ${score.toLocaleString()}/1000)</div>`;
                } else {
                    progressHTML += `<div class="progress-item needed">🎯 <strong>Consistent</strong> - Need ${chestsNeeded} more chests AND ${pointsNeeded} more points (currently ${chests}/70 chests, ${score.toLocaleString()}/1000 points)</div>`;
                }
            }
            
            modalProgress.innerHTML = progressHTML;
            
            // Show modal
            modal.classList.add('active');
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }
        
        function closePlayerModal() {
            const modal = document.getElementById('playerModal');
            modal.classList.remove('active');
            
            // Restore body scroll
            document.body.style.overflow = '';
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('playerModal');
            if (e.target === modal) {
                closePlayerModal();
            }
        });
        
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab content
            const selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Add active class to the correct button
            const buttonTexts = {
                'leaderboard': '🏆 Leaderboard',
                'badges': '🏅 Badge System', 
                'scoring': '⭐ Chest Scoring'
            };
            
            tabButtons.forEach(btn => {
                if (btn.textContent.trim() === buttonTexts[tabName]) {
                    btn.classList.add('active');
                }
            });
            
            // Show/hide leaderboard-only elements
            const leaderboardOnlyElements = document.querySelectorAll('.leaderboard-only');
            leaderboardOnlyElements.forEach(element => {
                if (tabName === 'leaderboard') {
                    element.style.display = '';
                } else {
                    element.style.display = 'none';
                }
            });
            

        }
    </script>
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

  // ⬇️ Tu proyecto (URL y anon key public) — ya lo teníamos
  const supabase = createClient(
    'https://dcxljettjctekbhxcyrw.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjeGxqZXR0amN0ZWtiaHhjeXJ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMDYyOTgsImV4cCI6MjA3MDg4MjI5OH0.X7OWTobYUQqKJA41BlozsMqqqRd_ndO-uh9gxRv9s7U'
  )

  // Lógica de badges (como la tenías)
  function getTextBadges(score, treats) {
  const badges = [];
  // ⭐ Legend: 2000+ puntos
  if (score >= 2000) {
    badges.push({ label: 'Legend', class: 'badge-legend' });
  }
  // 🥡 Chest Hero: 100+ chests
  if (treats >= 100) {
    badges.push({ label: 'Hero', class: 'badge-chest-hero' });
  }
  // 🎯 Consistent: 70+ chests AND 1000+ puntos
  if (treats >= 70 && score >= 1000) {
    badges.push({ label: 'Consistent', class: 'badge-consistent' });
  }
  return badges;
}

  // Render DESKTOP (respeto tus clases/estructura)
  function renderDesktopRow(p){
   const txtBadges = getTextBadges(p.score, p.treats)
  .map(b => `<span class="text-badge ${b.class}">${b.label}</span>`)
  .join('');
    return `
      <div class="player-row ${top3}" data-name="${(p.name||'').toLowerCase()}">
        <div class="rank ${rankClass}">#${p.rank}</div>
        <div class="player-name"><span class="clan-emblem">🧁</span>${p.name} ${p.rank<=3?'<span class="trophy">🏆</span>':''}
         ${txtBadges ? `<span class="badge-progress">${txtBadges}</span>` : ''}
        </div>
        <div class="stat score">${p.score.toLocaleString()}</div>
        <div class="stat">${p.treats}</div>
      </div>
    `;
  }

  // Render MOBILE (respeto tus clases/estructura)
  function renderMobileCard(p){
    const txtBadgesM = getTextBadges(p.score, p.treats)
  .map(b => `<span class="text-badge ${b.class}">${b.label}</span>`)
  .join('');
    return `
      <div class="mobile-card" data-name="${(p.name||'').toLowerCase()}">
        <div class="mobile-card-row1">
          <div class="mobile-rank ${rankClass}">#${p.rank}</div>
          <div class="mobile-player-name"><span class="clan-emblem">🧁</span>${p.name}</div>
        </div>
        <div class="mobile-card-row2">
          <div class="mobile-badges">${txtBadgesM}</div>
          <div class="mobile-stats">
            <div class="mobile-score">${p.score.toLocaleString()} ⭐</div>
            <div class="mobile-chests">${p.treats} 🍪</div>
          </div>
        </div>
      </div>
    `;
  }

  async function loadLeaderboard(){
    const container = document.getElementById('leaderboardContent'); // existe en tu HTML
    if (!container) return;
const { data, error } = await supabase
  .from('players_live')   // ✅ new view
  .select('name, score, treats, rank')
  .order('rank', { ascending: true });


    if (error){
      container.innerHTML = `<div class="empty-state"><h3>⚠️ Error</h3><p>No se pudieron cargar los datos.</p></div>`;
      console.error(error); return;
    }
    if (!data?.length){
      container.innerHTML = `<div class="empty-state"><h3>Sin datos</h3><p>Aún no hay jugadores.</p></div>`;
      return;
    }

    container.innerHTML = data.map(p => renderDesktopRow(p) + renderMobileCard(p)).join('');

    // KPIs superiores (si existen)
    const kWar = document.getElementById('totalWarriors');
    const kCh  = document.getElementById('totalChests');
    const kSc  = document.getElementById('totalScore');
    if (kWar) kWar.textContent = data.length;
    if (kCh)  kCh.textContent  = Math.round(data.reduce((a,b)=>a+(b.treats||0),0)/data.length);
    if (kSc)  kSc.textContent  = Math.round(data.reduce((a,b)=>a+(b.score||0),0)/data.length).toLocaleString();
  }

  // Buscador (usa tus IDs/clases existentes)
  function setupSearch(){
    const input = document.getElementById('nameSearch');
    const out   = document.getElementById('searchResults');
    const clear = document.getElementById('clearBtn');
    if (!input) return;

    const run=()=>{
      const q=(input.value||'').trim().toLowerCase();
      const rows=document.querySelectorAll('#leaderboardContent .player-row, #leaderboardContent .mobile-card');
      let hits=0;
      rows.forEach(el=>{
        const name=el.getAttribute('data-name')||'';
        const match=q && name.includes(q);
        el.classList.toggle('search-match', !!match); // tu CSS ya resalta .search-match
        if (match) hits++;
      });
      if (out) out.textContent = q?`Resultados: ${hits}`:'';
      if (clear) clear.style.display = q?'inline-flex':'none';
    };
    input.addEventListener('input', run);
    if (clear) clear.addEventListener('click', ()=>{ input.value=''; input.focus(); run(); });
  }

  // Tabs (tu HTML ya trae botones con onclick="showTab('...')")
  window.showTab = function(tab){
    const map = { leaderboard:'leaderboard-tab', badges:'badges-tab', scoring:'scoring-tab' };
    const target = map[tab];
    if (!target) return;
    document.querySelectorAll('.tab-content').forEach(s=>s.classList.remove('active'));
    document.getElementById(target)?.classList.add('active');
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    const label = tab==='leaderboard'?'🏆 Leaderboard':tab==='badges'?'🏅 Badge System':'⭐ Chest Scoring';
    [...document.querySelectorAll('.tab-btn')].find(b=>b.textContent.includes(label))?.classList.add('active');
  }

  // Countdown semanal + progress bar (IDs reales de tu HTML)
  function setupCountdown(){
    const daysEl=document.getElementById('days'), hoursEl=document.getElementById('hours'),
          minsEl=document.getElementById('minutes'), secsEl=document.getElementById('seconds'),
          fill=document.getElementById('weekProgress'), pctEl=document.getElementById('progressPercentage');
    if (!hoursEl || !fill) return;

    // Semana: Domingo 11:00 → Domingo 10:59 (hora CDMX aprox desde el cliente)
    const now=new Date();
    const day=now.getDay(); // 0=domingo
    const toSunday=(7-day)%7;
    const nextSunday=new Date(now); nextSunday.setDate(now.getDate()+toSunday); nextSunday.setHours(11,0,0,0);
    if (now>=nextSunday) nextSunday.setDate(nextSunday.getDate()+7);
    const start=new Date(nextSunday); start.setDate(start.getDate()-7);

    function tick(){
      const t=new Date();
      const total=nextSunday-start, elapsed=t-start, remain=Math.max(0,nextSunday-t);
      const d=Math.floor(remain/86400000), h=Math.floor((remain/3600000)%24),
            m=Math.floor((remain/60000)%60), s=Math.floor((remain/1000)%60);
      if (daysEl) daysEl.textContent=d; if (hoursEl) hoursEl.textContent=h;
      if (minsEl) minsEl.textContent=m; if (secsEl) secsEl.textContent=s;
      const pct=Math.min(100, Math.max(0, (elapsed/total)*100));
      fill.style.width = `${pct.toFixed(2)}%`;
      if (pctEl) pctEl.textContent = `${pct.toFixed(0)}%`;
    }
    tick(); setInterval(tick, 1000);
  }

  // Boot
  await loadLeaderboard();
  setupSearch();
  setupCountdown();
</script>

</body>
</html>
